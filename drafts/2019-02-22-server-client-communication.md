---
layout: post
title: '서버-클라이언트 통신과 HTTP'
comments: true
author: seungyoon
date: 2019-02-22
tags: [Network, Study, CodeStates]
---

# 서버-클라이언트 통신(Server-Client Communication)

## 서버-클라이언트 모델

서버(server)는 말 그대로 일하는(serve) 것이다.
무슨 일을 하겠는가?
당연히 상전인 고객이 시킨 일을 해서 드릴 것이다.
따라서 서버와 클라이언트 간에는 고객(클라이언트)이 보낸 요청(request)과 서버가 요청을 처리한 뒤, 고객에게 넘겨주는 응답(response)이 오간다.
이런 서버-클라이언트 모델은 다음 그림을 보면 쉽게 이해할 수 있다.

<figure>
  <img src="/assets/figures/server-client-model.jpg" alt="serverclientmodel"/>
  <figcaption>서버와 클라이언트 간의 관계를 묘사한 그림</figcaption>
</figure>

고객이 요청을 하면 서버는 내부적으로 설계된 논리(비즈니스 로직이라고도 부름)에 따라 요청을 처리한 뒤, 결과를 "잘 정리해서" 고객에게 돌려보내준다.
이 요청과 응답은 서로 알아볼 수 있어야하기 때문에 "어떤 정해진 약속"을 따라 만들어진 형식에 맞게 주고 받는다.
여기서 말하는 약속이 바로 HTTP(Hyper Text Transfer Protocol)다.

# HTTP

이 "약속"은 네트워크로 데이터를 보낼 때 사용하는 약속인 TCP/IP 프로토콜 위에서 동작한다.
그러니까 HTTP에서 정한 규격으로 만든 데이터를 TCP/IP 에서 정한 규격으로 서버와 클라이언트가 주고 받는다는 말이다.
이 HTTP는 다음의 특징을 갖는다.

- TCP/UDP의 80번 포트를 사용한다.
- HTTP/1.1
- 시작줄, 헤더, 빈줄, 몸체의 순서로 구성된다.

호출 메시지와 응답 메시지의 구조는 HTTP의 구조를 비슷하게 갖고 있지만,
세부적으로 시작줄(응답 메시지에서는 상태줄)에서 차이를 보인다.

## 시작줄(Starting line)

### 호출(Request) 메세지

1. HTTP methods (GET, PUT, POST, HEAD, OPTIONS)
2. 요청 목표(request target): 보통 URL 또는
3. HTTP 버전

### 응답(Response) 메세지

응답 메시지에서는 시작줄을 상태줄이라고 부른다.
호출이 어떻게 처리되었는지 알려주는 상태코드를 돌려주기 때문이다.

1. 프로토콜 버전. 보통 HTTP/1.1이 적힌다.
2. 상태 코드(status code): 요청의 성공 또는 실패를 나타낸다. 자주 나오는 코드는 `200`, `404`, `302`가 있다.
3. 상태 텍스트(status text): 간단히 정보만 전달하기 위해 상태코드를 텍스트로 설명한 내용이다.

## 헤더(Headers)

호출의 경우에는 호출에서 필요로 하는 추가적인 정보를 담고 있고, 응답의 경우 상태줄에 담지 못하는 부가적인 서버 정보를 담고 있다.
대소문자를 구별하지 않는 이름 뒤에 콜론(`:`)을 쓰고 줄바꿈 없이 값이 적혀있는 형식으로 되어있다.

### 바디(Body)

서버에게 보낼 데이터를 여기에 넣기도 한다.
경우에 따라 바디가 존재하지 않을 수 있다.

## HTTP methods

호출 메시지에서 시작줄에 적히는 메서드에 대해 더 알아보자.
우선 자주 쓰이는 `GET`과 `POST`에 대해 알아보자.

### GET

```
GET /index.html
```

`GET`은 리소스로부터 데이터를 요청하는 데 사용된다.
이 메서드는 가장 자주 사용되는 HTTP 메서드 중 하나다.

이 메서드를 사용할 때 기억해야할 점은 다음과 같다.

- 캐시될 수 있다.
- 브라우저 기록에 남는다.
- 북마크에 추가할 수 있다.
- 민감한 데이터를 다룰 때 사용되어서는 안된다.
- 길이 제한을 갖고 있다.
- 데이터를 요청할 때만 사용할 수 있다.

### POST

```
POST /index.html
```

`POST` 메서드는 서버에 데이터를 보내 리소스를 생성하거나 업데이트하는 데 사용된다.
요청에서 사용하는 바디 종류는 `Content-Type` 헤더에 의해 결정된다.

이 메서드를 사용할 때 기억해야할 점은 다음과 같다.

- 캐시되지 않는다.
- 브라우저 기록에 남지 않는다.
- 북마크에 추가될 수 없다.
- 데이터 길이에 제한이 없다.
